{% extends "base.html" %}

{% block content %}
<section class="container" style="padding: 2rem; max-width: 800px;">
    <h1 style="margin-bottom: 1.5rem;">Horario de Atención: {{ doctor.username }}</h1>

    <form method="POST" class="card"
        style="padding: 2rem; background: white; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

        <table style="width: 100%; border-collapse: collapse; margin-bottom: 2rem;">
            <thead>
                <tr style="text-align: left; border-bottom: 2px solid #eee;">
                    <th style="padding: 1rem;">Día</th>
                    <th style="padding: 1rem; text-align: center;">Activo</th>
                    <th style="padding: 1rem;">Inicio</th>
                    <th style="padding: 1rem;">Fin</th>
                </tr>
            </thead>
            <tbody>
                {% set days = ['Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado', 'Domingo'] %}
                {% for i in range(7) %}
                {% set sched = sched_map.get(i) %}
                <tr style="border-bottom: 1px solid #f5f5f5;">
                    <td style="padding: 1rem; font-weight: bold;">{{ days[i] }}</td>
                    <td style="padding: 1rem; text-align: center;">
                        <input type="checkbox" name="day_{{ i }}_active" {{ 'checked' if sched and sched.is_active
                            else '' }} style="transform: scale(1.5);">
                    </td>
                    <td style="padding: 1rem;">
                        <input type="time" name="day_{{ i }}_start"
                            value="{{ sched.start_time.strftime('%H:%M') if sched else '09:00' }}"
                            style="padding: 0.5rem; border: 1px solid #ddd; border-radius: 5px;">
                    </td>
                    <td style="padding: 1rem;">
                        <input type="time" name="day_{{ i }}_end"
                            value="{{ sched.end_time.strftime('%H:%M') if sched else '17:00' }}"
                            style="padding: 0.5rem; border: 1px solid #ddd; border-radius: 5px;">
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <div style="display: flex; gap: 1rem;">
            <button type="submit" class="btn-primary"
                style="padding: 0.8rem 2rem; border: none; border-radius: 25px; cursor: pointer; color: white;">Guardar
                Cambios</button>
            <a href="{{ url_for('admin_doctors') }}"
                style="padding: 0.8rem 2rem; background: #6c757d; color: white; text-decoration: none; border-radius: 25px; transition: 0.2s;">Cancelar</a>
        </div>
    </form>
</section>
{% endblock %}